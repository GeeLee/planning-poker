<!DOCTYPE html>
<html>
<head>
	<title>Planning Poker online | inovex GmbH</title>
	<link rel="stylesheet" type="text/css" href="css/main.css" />
	<script type="text/javascript" src="js/jquery/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="js/nl2br.js"></script>
	<script type="text/javascript" src="js/jquery/modules/jquery.login.js"></script>
	<script type="text/javascript" src="js/jquery/modules/jquery.logout.js"></script>
	<script type="text/javascript" src="js/jquery/modules/jquery.cardselection.js"></script>
	<script type="text/javascript" src="js/jquery/modules/jquery.scrumMaster.js"></script>
	<script type="text/javascript" src="js/jquery/modules/jquery.productOwner.js"></script>
	<script type="text/javascript" src="js/jquery/modules/jquery.WebSocket.js"></script>
</head>

<body>
	<div class="poker-overlay">
		<div class="poker-login">
			<div class="poker-top">Login</div>
				<div class="poker-content">
				<form action="/login" method="post" id="poker-login-form">
					<p class="poker-login-user">
						<label>Bitte gibt deine Rolle an</label>
						<select name="role">
							<option value="developer">Entwickler</option>
							<option value="productOwner">Product Owner</option>
							<option value="scrumMaster">Scrum Master</option>
						</select>
					</p>

					<p class="poker-login-user">
						<label>Bitte gib deinen Namen an</label>
						<input type="text" name="name" />
					</p>

					<p class="poker-login-user">
						<input type="submit" value="Einloggen" class="poker-login-submit" />
					</p>
				</form>
			</div>
		</div>
	</div>
	<div class="poker-main">
		<div class="poker-top">&nbsp;</div>

		<div class="poker-content">
			<h1>Planning Poker online</h1>
			<div class="poker-users">
				<p>Im Raum:</p>
				<p class="poker-users-online"></p>
			</div>

			<div class="poker-separator">&nbsp;</div>

			<div class="poker-userstory">
				<p>Aktuelle Userstory:</p>
				<div class="poker-userstory-text-container">
					<p id="poker-userstory-text"></p>
					<p class="poker-userstory-edit scrum-product-owner">
						<button id="poker-userstory-edit-button" disabled="disabled">Userstory bearbeiten</button>
					</p>
				</div>
			</div>

			<div class="poker-separator">&nbsp;</div>
			<div class="poker-felt">
				<!--
				<div class="poker-card-display poker-card-display-hidden">
					<a class="poker-card">8</a>
					<a class="poker-card poker-card-back">
						<img src="img/inovex-logo.png" alt="" />
					</a>
					<span class="poker-card-player">Khalid</a>
				</div>
				<div class="poker-card-display">
					<a class="poker-card">13</a>
					<span class="poker-card-player">Oliver</a>
				</div>
				<div class="poker-card-display">
					<a class="poker-card">5</a>
					<span class="poker-card-player">Andreas</a>
				</div>
				//-->
			</div>
			<div class="poker-separator">&nbsp;</div>
			<div class="poker-userinfo">
				Du bist angemeldet als: <span class="poker-userinfo-name"></span> (<span class="poker-userinfo-role"></span>)
				<img src="img/icon/lock_open.png" alt="Ausloggen" title="Ausloggen" class="poker-logout" />
			</div>
			<div class="poker-cards scrum-developer">
				<a class="poker-card">0</a>
				<a class="poker-card">1/2</a>
				<a class="poker-card">1</a>
				<a class="poker-card">2</a>
				<a class="poker-card">3</a>
				<a class="poker-card">5</a>
				<a class="poker-card">8</a>
				<a class="poker-card">13</a>
				<a class="poker-card">20</a>
				<a class="poker-card">40</a>
				<a class="poker-card">100</a>
				<a class="poker-card">?</a>
			</div>
			<div class="poker-cards-show scrum-master">
				<button id="poker-cards-show-button" disabled="disabled">Karten aufdecken</button>
				<button id="poker-cards-reset-button">Kartenfeld leeren</button>
			</div>
			<form class="poker-userstory-form scrum-product-owner">
				<textarea id="poker-userstory-textarea"></textarea>
				<button id="poker-userstory-reset" type="reset">Userstory zur&uuml;cksetzen</button>
				<button id="poker-userstory-post" disabled="disabled">Userstory &uuml;bernehmen</button>
			</form>
			<div class="poker-separator">&nbsp;</div>
		</div>
	</div>

	<footer class="poker-footer">
		<div class="poker-content">
			<b>&copy;2013 inovex GmbH</b> - Developed by Dominik Jungowski
		</div>
	</footer>
	<script type="text/javascript">
		var options = {
			socket: {
				address: '127.0.0.1',
				port: 80
			},
			lsUserKey: 'user'
		};

		window.managedSocket = $.WebSocket(
			options.socket,
			{
				userlist: '.poker-users-online',
				pokerFelt: '.poker-felt',
				pokerCardsShowButton: '#poker-cards-show-button',
				pokerCardSelectedClass: 'poker-card-selected',
				showCardsSelectorClass: 'poker-card-display',
				showCardsToggleClass: 'poker-card-display-hidden',
				userstory: '.poker-userstory',
				userstoryText: '#poker-userstory-text',
				editUserStoryButton: '#poker-userstory-edit-button'
			}
		);

		$('#poker-login-form').login({
			overlay: '.poker-overlay',
			userInfoClass: '.poker-userinfo',
			nameClass: '.poker-userinfo-name',
			roleClass: '.poker-userinfo-role',
			lsUserKey: options.lsUserKey,
			roleSettings: {
				developer: {
					hide: ['.scrum-master', '.scrum-product-owner'],
					show: []
				},
				scrumMaster: {
					hide: ['.scrum-developer', '.scrum-product-owner'],
					show: ['.scrum-master']
				},
				productOwner: {
					hide: ['.scrum-developer', '.scrum-master'],
					show: ['.scrum-product-owner']
				}
			}
		});

		$('.poker-logout').logout({
			lsUserKey: options.lsUserKey
		});

		$('.poker-cards').cardselection({
			lsUserKey: options.lsUserKey,
			selectedClass: 'poker-card-selected'
		});

		$('.scrum-master').scrumMaster({
			pokerCardsShowButton: '#poker-cards-show-button',
			pokerCardsResetButton: '#poker-cards-reset-button'
		});

		$('.scrum-product-owner').productOwner({
			postUserStoryTextarea: '#poker-userstory-textarea',
			postUserStoryButton: '#poker-userstory-post',
			editUserStoryButton: '#poker-userstory-edit-button',
			userStoryText: '#poker-userstory-text'
		});

		$(window).on('load', function() {
			$('.poker-login-user input[type="text"]').focus();
		});
	</script>
</body>

</html>